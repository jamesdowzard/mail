{
  "project": "mail",
  "created_at": "2025-12-26T09:30:00Z",
  "updated_at": "2025-12-26T12:15:00Z",
  "phase": "implementation",
  "features": [
    {
      "id": "docker-config",
      "name": "Docker Configuration",
      "description": "Stalwart docker-compose running on Pi at ~/stalwart/",
      "status": "complete",
      "priority": 1,
      "dependencies": [],
      "files": ["docker/docker-compose.yml", "docker/.env.example"],
      "notes": "Running at 192.168.0.58:8093 with user james@dowzard.family"
    },
    {
      "id": "dns-records",
      "name": "DNS Records Setup",
      "description": "MX, SPF, DMARC configured in Cloudflare for dowzard.family",
      "status": "complete",
      "priority": 2,
      "dependencies": ["docker-config"],
      "files": ["dns/records.md"],
      "notes": "MX→Cloudflare Email Routing (route1/2/3.mx.cloudflare.net), SPF includes _spf.mx.cloudflare.net and amazonses.com"
    },
    {
      "id": "ssl-certs",
      "name": "SSL Certificates",
      "description": "Set up Let's Encrypt certificates for mail.dowzard.family",
      "status": "pending",
      "priority": 3,
      "dependencies": ["dns-records"],
      "files": ["scripts/renew-certs.sh"]
    },
    {
      "id": "port-forwarding",
      "name": "Port Forwarding",
      "description": "DMZ rule on router forwards all ports to Pi (192.168.0.58)",
      "status": "complete",
      "priority": 4,
      "dependencies": [],
      "files": ["docs/port-forwarding.md"],
      "notes": "DMZ configured. ISP likely blocks port 25 inbound. Use Cloudflare Email Routing for receiving."
    },
    {
      "id": "sending-config",
      "name": "Outbound Email Setup",
      "description": "AWS SES configured as SMTP relay for outbound mail",
      "status": "complete",
      "priority": 5,
      "dependencies": ["dns-records"],
      "files": ["docs/ses-setup.md"],
      "notes": "SES relay configured in Stalwart config.toml. Route: ses-relay → email-smtp.ap-southeast-2.amazonaws.com:587. queue.outbound.next-hop = ses-relay. SES in sandbox mode (200 emails/day, verified addresses only)."
    },
    {
      "id": "inbound-routing",
      "name": "Inbound Email Routing",
      "description": "Cloudflare Email Routing forwards inbound mail to Gmail",
      "status": "complete",
      "priority": 5,
      "dependencies": ["dns-records"],
      "files": ["docs/cloudflare-email-routing.md"],
      "notes": "james@dowzard.family → james.dowzard@gmail.com via Cloudflare Email Routing. ISP blocks port 25 so direct SMTP receiving not possible."
    },
    {
      "id": "spam-filtering",
      "name": "Spam Filtering",
      "description": "Configure Stalwart spam filtering rules and blocklists",
      "status": "pending",
      "priority": 6,
      "dependencies": ["docker-config"],
      "files": ["docker/spam-rules.toml", "scripts/update-blocklists.sh"]
    },
    {
      "id": "brain-client",
      "name": "Brain Integration",
      "description": "Python client for Brain to read/send email via IMAP/SMTP",
      "status": "pending",
      "priority": 7,
      "dependencies": ["docker-config"],
      "files": ["brain/client.py", "brain/README.md"]
    },
    {
      "id": "monitoring",
      "name": "Monitoring & Alerts",
      "description": "ntfy alerts for mail server health, queue size, failed deliveries",
      "status": "pending",
      "priority": 8,
      "dependencies": ["docker-config"],
      "files": ["scripts/monitor-mail.sh", "docker/healthcheck.sh"]
    },
    {
      "id": "backup",
      "name": "Backup System",
      "description": "Automated backup of Stalwart data to S3",
      "status": "pending",
      "priority": 9,
      "dependencies": ["docker-config"],
      "files": ["scripts/backup-mail.sh", "docs/restore.md"]
    }
  ]
}
